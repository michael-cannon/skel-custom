#!/bin/bash

# Prepare Testimonials Widget for release
#
# @author Michael Cannon <mc@aihr.us>

# TODO read readme head to parse out version
if [[ -z ${1} ]]
then
	echo "What's the version number?"
	exit
fi

KEY="tw"
VERSION=${1}

source ~/.skel/bin/custom/wpinit ${KEY}
echo

# TODO
# grep readme.txt for same version information "Stable tag: 2.12.1"
# grep testimonials-widget.php for same version information "Version: 2.12.1"
# bail if not found

wppackage ${KEY}
wppush ${KEY}

# TODO update files
# push svn and do WordPress release
cd ~/code/svn.wordpress
cd testimonials-widget
svn cleanup .
svn up --force
svn cp trunk tags/${VERSION}
svn ci -m "Release version ${VERSION}"

open http://wordpress.org/extend/plugins/about/validator/

mvim ${SITE_WP_PLUGINS}/testimonials-widget/changelog.txt
open http://aihr.us/wp-admin/post.php?post=16105\&action=edit

open http://testwp.localhost/wp-admin/update-core.php
open http://aihr.us/wp-admin/update-core.php
open http://wordpress.org/extend/plugins/testimonials-widget/

## for SCRIPT in ${SCRIPTS}
## do
## 	echo
## 	${SCRIPT}
## 	echo
## done